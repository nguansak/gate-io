
<head>
    <script src="./js/jquery.min.js"></script>
    <script type=text/javascript>
        function sendCountData(dir) {
            let gate = "sys"
            let url = "/gate/" + gate + "/counter"
            let time = (new Date()).getTime()/1000
            let data = { "gate": gate, "no": 1, "t": time, "dir": dir }
            console.log({data})
            $.ajax({
                type: "POST",
                url: url,
                dataType: "json",
                data : JSON.stringify(data),
                contentType : 'application/json'
            });
        }

        $(function() {
            setInterval(function () {
                $.getJSON('/total', {}, function(data) {
                    $("#total").text(data.total);
                })
            }, 1000);

            $( "#body" ).keypress(function(key) {
                if (key.key === "]") {// up
                    console.log("up")
                    sendCountData(1)
                }
                if (key.key === "[") {// down
                    console.log("down")
                    sendCountData(-1)
                }
            });
        });
    </script>
    <style>
        #total {
            font-size: 300pt;
            padding: 30px;
            background: lightgray;
            width: 300pt;
            text-align: right;
            left: auto;
            display: block;
        }
    </style>
</head>
<body id="body">
    <h1>Counter</h1>
    <div class="total" id="total">0</div>
</body>